# Consul概述

## 作用

### 服务发现

### 健康检查

### key-value存储操作

### 多数据中心（DC）

## 使用

### 启动代理

以开发模式启动Consul代理，此模式对于快速轻松地启动单节点Consul环境非常有用`consul agent -dev`

### 集群成员

可以使用`consul members`来查看集群成员，此时只能看见自己的节点信息，它运行的IP地址，健康状态，他在集群中的角色以及一些版本信息。`consul members`命令的输出是基于`grossip protocol`，是最终一致性，如果要获取实时数据，则需要使用`HTTP API`将请求转发给Consul服务器:`localhost:8500/v1/catalog/nodes`

### 停止代理

可以使用`Ctrl + C`正常暂停代理，中断后，可以看见它离开集群并关闭。

正常关闭，Consul会通知其他集群节点该节点已经离开，如果强行终止，则其他节点会检测到该节点是一个故障节点，仅将其健康状态设置为严重，但是不会从目录中删除，Consul会自动尝试连接该节点，但是该节点已经离开集群

如果代理是作为服务器运行的，那么优雅的离开对于避免导致可能的可用性中断影响共识协议非常重要。

## 服务注册

