# 日志系统

与查询语句不同，创建和更新流程还牵扯到两个重要的日志模块

* redo log（重做日志）
* binlog（归档日志）



## redo log

### 背景

如果每更新一次表数据，就要进行磁盘写入，然后磁盘要找到对应的那条记录，然后在更新，整个过程 I/O 成本，查询成本都很高

所以 MySQL 在有一条记录需要更新的时候，InnoDB 引擎就会先把记录写到 redo log 里面，并更新内存，这个时候更新就算完成。同时 InnoDB 引擎会在适当的时候将这个操作记录更新到磁盘里，而这个更新往往是系统比较空闲的时候操作

但是 InnoDB 的 redo log 大小是固定的，比如可以配置一组 4 个文件，每个文件的大小是 1GB，那么就可以记录 4G 的操作，从头开始写，写到末尾就又回到开头循环写，如下图

