# MyBatis-Plus 使用笔记

## 官方文档

* [官网](https://mp.baomidou.com/)
* [github](https://github.com/baomidou/mybatis-plus)
* [码云](https://gitee.com/baomidou/mybatis-plus)

## QuickStart

演示工程为 Spring-Cloud 标准项目

### 导入依赖

```xml
<!-- 引入这个就不用再去引入 mybatis 和 mybatis-spring 的依赖了 -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.3.2</version>
</dependency>

<!-- mysql 连接 -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.17</version>
</dependency>
```



### 配置数据源

```yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/primary?characterEncoding=utf8&useSSL=false&serverTimezone=GMT%2B8&rewriteBatchedStatements=true
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: 123456
    # 使用的阿里的 druid 作为连接数据源
    type: com.alibaba.druid.pool.DruidDataSource

```



### 配置 MyBatis-plus

```yaml
# mybatis-plus 配置
mybatis-plus:
  configuration:
    # 输出 sql
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  # 配置 mapper 的路径
  mapper-locations: classpath*:/com/yczuoxin/springcloud/demo/mapper/**/*.xml
```



### 使用

Dao 层

```java
@Repository
public interface UserDao extends BaseMapper<User> {
	
}
```



Service 层

```java
@Service
public class UserService extends ServiceImpl<UserDao, User> {

    @Autowired
    private UserDao userDao;

    public User findById(Long id) {
        return userDao.selectById(id);
    }
}

```



Controller 层

```java
@RestController
public class UserController {

    @Autowired
    private UserService userService;

    @GetMapping(value = "/user/{id}")
    public User getUser(@PathVariable Long id) {
        userService.findById(id);
        return userService.getById(id);
    }

}
```



### 测试

调用 http 请求 http://localhost:8080/user/1

返回结果

```json
{"id":1,"name":"jack","age":20}
```

