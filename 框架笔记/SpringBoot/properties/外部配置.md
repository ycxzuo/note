# 外部配置

## 定义

Spring Boot 应用的外部配置资源。这些配置资源能够与代码相互配合，避免硬编码的方式，提供应用数据或行为变化的灵活性



## 类型

* Properties 文件
* YAML 文件
* 环境变量
* Java 系统属性
* 命令行



## 配置文件加载顺序

* ./config/
* ./
* classpath/config/
* classpath/



## 加载顺序

* 热加载
* 测试（Spring）
* 测试（Spring Boot）
* 命令行
* SPRING_APPLICATION_JSON Properties
* Servlet 参数（ServletConfig、ServletContext）
* JNDI
* 先属性配置，再环境变量
* application-{profile}.properties
* application.properties
* @PropertitySource
* SpringApplication.setDefaultProperties



## @Value 和 @ConfigurationProperties 对比

|                               | @Value | @ConfigurationProperties |
| ----------------------------- | ------ | ------------------------ |
| 批量插入                      | 不支持 | 支持                     |
| 松散绑定                      | 不支持 | 支持                     |
| spel                          | 支持   | 不支持                   |
| 复杂类型封装                  | 不支持 | 支持                     |
| JSR303 数据校验（@Validated） | 不支持 | 支持                     |



## 配置的引用

* XML
* Annotation
* Java Code



*在命令行中，相同的属性列表，后面的属性会优先于或覆盖前面的，如 --spring.profiles.include=test,demo，demo 的属性会覆盖 test 的属性值*