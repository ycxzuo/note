# 红黑树

## 概念

红黑树，又被称为对称二叉B树。

其本质是一种二叉查找树，单它在二叉查找树的基础上额外添加了一个标记（颜色），同时具有一定的规则。这些规则使红黑树保证了一种平衡，插入、删除。查找的最坏时间复杂度都为`O(log n)`，它的统计性能好于平衡二叉树（AVL树）

### 特性

1. 每个节点要么是红色，要么是黑色
2. 根节点永远是黑色的
3. 所有的叶节点都是是黑色的（注意这里说叶子节点其实是上图中的 NIL 节点）
4. 每个红色节点的两个子节点一定都是黑色
5. 从任一节点到其子树中每个叶子节点的路径都包含相同数量的黑色节点

### 黑色高度

从根节点到叶子节点的路径上，黑色节点的个数

## 红黑树的左旋右旋

红黑树的左旋右旋目的是调整红黑节点结构，转移黑色节点位置，使其在进行插入、删除后任能保持红黑树的5条性质

### 左旋

把左孩子变成自己的父节点，自己变成左孩子的右孩子，左孩子的右孩子变成自己的左孩子

![左旋](http://wx2.sinaimg.cn/mw690/0060lm7Tly1fxnx1iigvxj30r108wjrr.jpg)

### 右旋

即左旋反过来实现



## 红黑树的平衡插入

红黑树的插入主要分两步

* 首先和二叉查找树的插入一样
* 然后调整结构，保证满足红黑树状态
  * 对节点进行重新填色
  * 对树结构进行旋转

### 插入节点

就如二叉查找树一样先插入节点

### 插入后调整红黑树结构

插入的节点颜色可能有两种

* 插入的节点为黑色，那么一定会违背第五条特性
* 插入的节点是红色，当我们是在红色节点下插入红色节点，那么一定会违背第四条特性

综合上面的情况考虑，插入黑色是一定会违背特性的，那么插入的节点一定要是红色，此时只要关心父节点是否为红，如果是红的，就要把父节点进行变化，让父节点变成黑色，或者换一个黑色节点当父亲，这些操作的同时不能影响不同路径上的黑色节点数一致的规则

#### 情况一：父亲节点和叔叔节点都是红色

