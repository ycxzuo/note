# Eureka+Zookeeper+Consul对比

## 概述

| Feature      | Consul                 | Zookeeper             | Etcd     | Eureka   |
| ------------ | ---------------------- | --------------------- | -------- | -------- |
| 服务健康检查 | 服务状态，内存，硬盘等 | (弱)长连接，keepalive | 连接心跳 | 可配支持 |
| 多数据中心   | 支持                   | -                     | -        | -        |
| k-v存储      | 支持                   | 支持                  | 支持     | -        |
| 一致性协议   | raft                   | paxos                 | raft     | -        |
| CAP          | CP                     | CP                    | CP       | AP       |
| 自身监控     | metrics                | -                     | metrics  | metrics  |
| http协议支持 | 支持                   | -                     | 支持     | 支持     |
| 适用节点     | <30K                   | <20K                  |          | <5K      |



## Eureka特点

### 优点

* Spring Cloud推荐的服务发现方案
* AP模型，数据最终一致性
* 简单易用，有自己的控制台

### 缺点

* 客户端上报完整的注册信息，造成服务端内存浪费
* 没有持久化，需要做集群
* 客户端定时任务轮询更新，增加服务器压力
* 集群中使用广播式复制模型，增加服务器压力



## Zookeeper特点

### 优点

* 有自己的成熟的协调系统，与Dubbo组成服务注册发现的生态
* CP模型，ZAB算法，强一致性

### 缺点

* 维护成本高，比如服务器扩容，重启时都比较麻烦
* 客户端和服务端的session连接，客户端多了服务端压力大
* 没有控制台



## Consul特点

### 优点

* 可以做服务发现，也可以做分布式配置
* 适用于Service Mesh
* CAP模型（官方说法），Raft+Gossip算法，数据最终一致性

### 缺点

* 非Java语言写的，维护和问题排查成本高

